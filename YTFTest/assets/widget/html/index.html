<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<title>YTFCloud</title>
<link rel="stylesheet" href="../ytfui/css/ytfui.css" />
<link rel="stylesheet" href="../css/main.css" />
<style type="text/css">
body, html {
	width: 100%;
	height: 100%;
	background: inherit;
}
.hidden {
	display: none;
}
</style>
</head>

<body>
<header class="header-bar bg-main" id="header0">
  <div class="header-left fz32"> <i class="icon icon-menu"></i><span>分类</span> </div>
  <h2 class="header-title">动态</h2>
  <div class="header-right dynamic_add"> <i class="icon icon-edit"></i> </div>
</header>
<header class="header-bar bg-main hidden" id="header1">
  <h2 class="header-title">笔友</h2>
  <div class="header-right select_people"> <i class="icon icon-search"></i> </div>
</header>
<header class="header-bar bg-main hidden" id="header2">
  <ul class="tabs-nav tabs-nav-green tn-hmc" id="friends_s">
    <li class="tabs-nav-li active" data-id="1"> 找笔友 </li>
    <li class="tabs-nav-li " data-id="2"> 找熟人 </li>
  </ul>
</header>
<header class="header-bar bg-main hidden" id="header3">
  <ul class="tabs-nav tabs-nav-green tn-hmc" id="mail_s">
    <li class="tabs-nav-li active" data-id ='0'> 已收信 </li>
    <li class="tabs-nav-li" data-id='1'> 已发信 </li>
  </ul>
  <div class="header-right fz32 mail-input"> 写信 </div>
</header>
<header class="header-bar bg-main hidden" id="header4">
  <h2 class="header-title">个人</h2>
</header>
<div id="main"></div>
<!--底部-->
<footer class="yt bg-main fz24 mt30 p-fixed-b" id="footer">
  <div class="yt-f1 yt yt-ac yt-ver yt-pc active">
    <div class="footer-icon footer-icon01"> <i></i><b></b> </div>
    <p class="mt5"> 动态 </p>
  </div>
  <div class="yt-f1 yt yt-ac yt-ver yt-pc">
    <div class="footer-icon footer-icon02"> <i></i><b></b> </div>
    <p class="mt5"> 笔友 </p>
  </div>
  <div class="yt-f1 yt yt-ac yt-ver yt-pc" id="select_people">
    <div class="footer-icon footer-icon03"> <i></i><b></b> </div>
    <p class="mt5"> 找人 </p>
  </div>
  <div class="yt-f1 yt yt-ac yt-ver yt-pc">
    <div class="footer-icon footer-icon04"> <i></i><b></b> </div>
    <p class="mt5"> 信件 </p>
  </div>
  <div class="yt-f1 yt yt-ac yt-ver yt-pc">
    <div class="footer-icon footer-icon05"> <i></i><b></b> </div>
    <p class="mt5"> 个人 </p>
  </div>
</footer>
</body>
<script src="../script/zepto.min.js" type="text/javascript"></script>
<script src="../ytfui/js/ytf.min.js" type="text/javascript"></script>
<script src="../script/common.js" type="text/javascript"></script>
<script src="../ytfui/js/html-size-calculation.js" type="text/javascript" charset="utf-8"></script>
<script>
ytfready = function() {
	statusBarFix(document.getElementById("header0"));
	YTF.eventListenerAdd({
		eventName : 'keyBack'
	}, function(ret, err) {
		if (ret) {
			YTF.confirm({
				title : "提示",
				msg : "确定要退出程序吗？",
				buttons : ["确定", "取消"]
			}, function(ret, err) {
				if (ret.buttonIndex == 1) {
					YTF.appClose();
				}
			});
		} else {
		}
	});
	var w = YTF.windowWidth;
	var windowHeight = YTF.windowHeight;
	var headerEl = $('header');
		y = headerEl.height();
	var h = windowHeight - y - $('footer').height();
	YTF.frameGroupOpen({
		frameGroupName : 'indexGroup',
		isLoop : false,
		isScroll : false,
		xywh : {
			x : 0,
			y : y,
			w : w,
			h : h,
			marginLeft : 0,
			marginTop : 0,
			marginBottom : 0,
			marginRight : 0
		},
		frames : [{
			frameName : 'dynamic_frame',
			htmlUrl : './dynamic_frame.html'
		}, {
			frameName : 'friends_frame',
			htmlUrl : './friends_frame.html',
			isBounces : false
		}, {
			frameName : 'search_friends_frame',
			htmlUrl : './search_friends_frame.html',
			isBounces : false
		}, {
			frameName : 'email_frame',
			htmlUrl : './email_frame.html'
		}, {
			frameName : 'my_frame',
			htmlUrl : './my_frame.html'
		}]
	}, function(ret, err) {
		//coding...
	});
}
/**
 *底部按钮切换
 */
function randomSwitchBtn(tag){
	YTF.frameClose({
			frameName : "menuFrame"
		});
	if (tag == $('#footer>div.active'))
		return;
	var eFootLis = $('#footer>div'),
		eHeaderLis = $('header'),
		index = 0;
	for (var i = 0,
		len = eFootLis.length; i < len; i++) {
		if (tag == eFootLis[i]) {
			index = i;
		} else {
			$(eFootLis[i]).removeClass("active");
		}
	};
	$("header").hide();
	$("#header" + index).show();
	statusBarFix(document.getElementById("header" + index));
	$(eFootLis[index]).addClass("active");
	YTF.frameGroupSetIndex({
		frameGroupName : 'indexGroup',
		index : index
	});
};

$(function() {
	$("#footer>div").bind("tap", function() {
		randomSwitchBtn(this);
	})

	$("#mail_s>li").bind("tap", function() {
		var index = $(this).attr("data-id");
		$(this).addClass("active").siblings().removeClass("active");
		YTF.excJs({
			winName : "index_main",
			frameGroupName : 'indexGroup',
			index : 3,
			script : 'emailSelect(' + index + ')'
		});
	});

	$(".header-left").bind("tap", function(){
		/*
			YTF.frameOpen({
				frameName : "menuFrame",
				htmlUrl : "./menu.html",
				background: "#000000",
				isBounces:true,
				xywh:{
						x : 0,
						y : y,
						w : 'auto',
						h : (YTF.windowHeight/100)*30,
					}
			});
		*/
		YTF.webUIShowPopupWindow({
			  popName : "menu",
			  htmlUrl : "./menu.html",
			  rect:{
				    y:y,
				    ay:y,
				  },
			  childBackground:"rgba(255,255,255,0)",
                                 modalBackground:"#f00",
                                 modalType:"1"
			});
			/*
		YTF.excJs({
			winName : "index_main",
			frameGroupName : "indexGroup",
			index : 0,
			script : "selectShow()"
		});
		*/
	})

	$(".dynamic_add").bind("tap", function() {
		openNewWin("dynamic_add_win", "./dynamic_add_win.html");
	})

	$("#friends_s>li").bind("tap", function() {
		var flag = $(this).attr("data-id");
		$(this).addClass("active").siblings().removeClass("active");
		YTF.excJs({
			winName : "index_main",
			frameGroupName : "indexGroup",
			index : 2,
			script : "friends_tab(" + flag + ")"
		});
	});
	
	$(".select_people").bind("tap",function(){
			randomSwitchBtn(document.getElementById("select_people"));
		})
});
/**
 *写信
 */
$(".mail-input").bind("tap", function() {
	YTF.winOpen({
		winName : 'email_input_win',
		htmlUrl : './email_input_win.html'
	});
});
</script>
</html>
