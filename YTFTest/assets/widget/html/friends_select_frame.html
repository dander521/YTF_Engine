<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<title>笔遇</title>
		<link rel="stylesheet" href="../ytfui/css/ytfui.css" />
		<link rel="stylesheet" href="../css/main.css" />
	</head>

	<body class="bgf8">
		<ul class="fz32 c33 bgff">
			<li class="yt yt-ac p30 bb" id="f_sex">
				<b class="yt-f1 db">性别</b><span class="fz28 c66">不限</span><i class="icon icon-next  ml10 db fz28"></i>
			</li>
			<li class="yt yt-ac p30 bb" id="f_age">
				<b class="yt-f1 db">年龄</b><span class="fz28 c66">不限</span><i class="icon icon-next fz28  ml10 db"></i>
			</li>
			<li class="yt yt-ac p30 bb" id="f_cls">
				<b class="yt-f1 db">星座</b><span class="fz28 c66">不限</span><i class="icon icon-next fz28  ml10 db"></i>
			</li>
			<li class="yt yt-ac p30 bb" id="f_state">
				<b class="yt-f1 db">状态</b><span class="fz28 c66">不限</span><i class="icon icon-next fz28  ml10 db"></i>
			</li>
			<li class="yt yt-ac p30 bb" id="f_distance">
				<b class="yt-f1 db">距离</b><span class="fz28 c66">不限</span><i class="icon icon-next fz28 ml10 db"></i>
			</li>
			<li class="yt yt-ac p30 bb">
				<b class="yt-f1 db">需求匹配</b><i class="switch switch-green">
				<input type="checkbox" name="needs" id="needs">
				<span></span></i>
			</li>
			<li class="yt yt-ac p30 bb">
				<b class="yt-f1 db">兴趣匹配</b><i class="switch switch-green">
				<input type="checkbox" name="hobbys" id="hobbys">
				<span></span></i>
			</li>
		</ul>
		<div class="btn btn-b bg-second yt-f1 db ml30 mr30 mt120 fz36">
			保存
		</div>
	</body>
	<script src="../script/zepto.min.js" type="text/javascript"></script>
	<script src="../script/common.js" type="text/javascript"></script>
	<script src="../ytfui/js/html-size-calculation.js" type="text/javascript" charset="utf-8"></script>
	<script>
		var sex = "";
		var age = "";
		var star = "";
		var status = "";
		var distance = "";
		ytfready = function() {
			sex = YTF.htmlParam.sex;
			age = YTF.htmlParam.age;
			star = YTF.htmlParam.star;
			status = YTF.htmlParam.status;
			distance = YTF.htmlParam.distance;
			//console.log("-----" + sex + "---------" + age);
			if (sex == "") {
				$("#f_sex").children("span").html("不限");
			} else {
				$("#f_sex").children("span").html(sexArr[sex]);
			}
			$("#f_age").children("span").html(getAgeTitle(age));
			if (star == "") {
				$("#f_cls").children("span").html("不限");
			} else {
				$("#f_cls").children("span").html(star);
			}
			if (status == "") {
				$("#f_state").children("span").html("不限");
			} else {
				$("#f_state").children("span").html(status);
			}
			$("#f_distance").children("span").html(getDistanceTitle(distance));
			$("#needs").prop("checked", YTF.htmlParam.need);
			$("#hobbys").prop("checked", YTF.htmlParam.hobby);
			/**
			 *条件选择监听
			 */
			YTF.eventListenerAdd({
				eventName : 'select_option'
			}, function(ret, err) {
				if (ret) {
					switch(ret.type) {
					case 'sex':
						sex = ret.value;
						$("#f_sex").children("span").html(ret.title);
						break;
					case 'age':
						age = ret.value;
						$("#f_age").children("span").html(ret.title);
						break;
					case 'cls':
						star = ret.value;
						$("#f_cls").children("span").html(ret.title);
						break;
					case 'state':
						status = ret.value;
						$("#f_state").children("span").html(ret.title);
						break;
					case 'distance':
						distance = ret.value;
						$("#f_distance").children("span").html(ret.title);
						break;
					}
				}
			});
		};

		$(function() {
			/**
			 *性别选择
			 */
			$("#f_sex").bind("tap", function() {
				YTF.winOpen({
					winName : 'friends_search_sex_win',
					htmlUrl : './friends_search_sex_win.html',
					htmlParam : {
						sex : sex
					}
				});
			});
			/**
			 * 年龄选择
			 */
			$("#f_age").bind("tap", function() {
				YTF.winOpen({
					winName : 'friends_search_age_win',
					htmlUrl : './friends_search_age_win.html',
					htmlParam : {
						age : age
					}
				});
			});
			/**
			 * 星座选择
			 */
			$("#f_cls").bind("tap", function() {
				YTF.winOpen({
					winName : 'friends_search_cls_win',
					htmlUrl : './friends_search_cls_win.html',
					htmlParam : {
						star : star
					}
				});
			});
			/**
			 * 状态选择
			 */
			$("#f_state").bind("tap", function() {
				YTF.winOpen({
					winName : 'friends_search_state_win',
					htmlUrl : './friends_search_state_win.html',
					htmlParam : {
						status : status
					}
				});
			});
			/**
			 * 距离选择
			 */
			$("#f_distance").bind("tap", function() {
				YTF.winOpen({
					winName : 'friends_search_distance_win',
					htmlUrl : './friends_search_distance_win.html',
					htmlParam : {
						distance : distance
					}
				});
			});
		});
		/**
		 *保存
		 */
		$(".bg-second").bind("tap", function() {
			var needs = $("#needs").prop("checked");
			var hobbys = $("#hobbys").prop("checked");
			YTF.eventSend({
				eventName : 'search_infos',
				attr : {
					sex : sex,
					age : age,
					star : star,
					status : status,
					distance : distance,
					need : needs,
					hobby : hobbys
				}
			}, function(ret, err) {
				YTF.winClose();
			});
		});

	</script>
</html>